.map{
    width: 100%;
    height: 100%;
    z-index: 98;

    position: fixed;
    left: 0;
    top: 0;

    // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∑—É–º–∞
    .leaflet-control-zoom {
        display: none;
    }

    // –°–∫—Ä—ã–≤–∞–µ–º –∞—Ç—Ä–∏–±—É—Ü–∏—é (–∫–æ–ø–∏—Ä–∞–π—Ç—ã)
    .leaflet-control-attribution {
        display: none;
    }

    // –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
    .leaflet-draw.leaflet-control {
        position: fixed;
        top: 180px; // –†–∞—Å–ø–æ–ª–∞–≥–∞–µ–º –ø–æ–¥ select_season
        left: 50%;
        transform: translateX(-50%);
        z-index: 999;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        padding: 8px;
        display: flex;
        gap: 8px;

        .leaflet-draw-toolbar {
            display: flex;
            gap: 4px;
            border: none;
            margin: 0;
            background: none;

            a {
                background-color: #4a90e2;
                border: none;
                border-radius: 4px;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;

                &:hover {
                    background-color: #357abd;
                }

                &.leaflet-draw-draw-polygon {
                    background-image: none;
                    &::before {
                        content: '‚¨°';
                        color: white;
                        font-size: 24px;
                    }
                }

                &.leaflet-draw-edit-edit {
                    background-image: none;
                    &::before {
                        content: '‚úé';
                        color: white;
                        font-size: 20px;
                    }
                }

                &.leaflet-draw-edit-remove {
                    background-image: none;
                    &::before {
                        content: 'üóë';
                        color: white;
                        font-size: 20px;
                    }
                }
            }
        }

        // –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
        @media (max-width: 768px) {
            top: 70px;
            padding: 6px;

            .leaflet-draw-toolbar a {
                width: 36px;
                height: 36px;
            }
        }
    }
}

.snap-indicator {
  
  pointer-events: none;
  
  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    background: rgba(0, 123, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: pulse 1s infinite;
  }
}

// –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–µ–π –ª–∏–Ω–∏–∏
.leaflet-draw-guide-dash {
  background-color: #fff !important; // –°–∏–Ω–∏–π —Ü–≤–µ—Ç
  opacity: 1 !important;
  transition: transform 0.1s ease-out;
}

// –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª—å –ø—É–Ω–∫—Ç–∏—Ä–∞
.leaflet-draw-guide {
  stroke: #fff !important; // –°–∏–Ω–∏–π —Ü–≤–µ—Ç
  stroke-dasharray: 5, 5 !important; // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–Ω–∫—Ç–∏—Ä–∞ (–¥–ª–∏–Ω–∞ –ª–∏–Ω–∏–∏, –¥–ª–∏–Ω–∞ –ø—Ä–æ–±–µ–ª–∞)
  stroke-opacity: 1 !important;
}

.map-legend {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  min-width: 200px;

  h4 {
    margin: 0 0 10px 0;
    font-size: 16px;
  }

  p {
    margin: 0 0 15px 0;
    font-size: 14px;
    color: #666;
  }

  .legend-gradient {
    display: flex;
    align-items: center;
    margin-bottom: 15px;

    span {
      font-size: 12px;
      color: #666;
    }

    .gradient-bar {
      flex: 1;
      height: 10px;
      margin: 0 10px;
      border-radius: 5px;
    }
  }

  .opacity-control {
    label {
      display: block;
      margin-bottom: 5px;
      font-size: 14px;
    }

    input {
      width: 100%;
    }
  }
}

// –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç
.ndvi-gradient {
  background: linear-gradient(to right, #ffffcc, #006837);
}

.evi-gradient {
  background: linear-gradient(to right, #ffffcc, #006837);
}

.lst-gradient {
  background: linear-gradient(to right, #313695, #a50026);
}

.moisture-gradient {
  background: linear-gradient(to right, #ffffd9, #081d58);
}

.precipitation-gradient {
  background: linear-gradient(to right, #ffffff, #08306b);
}

// –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞)
.leaflet-draw-actions {
  li {
    margin: 3px 0;
    
    a {
      font-family: inherit;
      font-size: 14px;
      padding:1px 12px;
      background: white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      border-radius: 4px;
      transition: all 0.2s ease;
      
      &[title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"] {
        background: #4CAF50;
        color: white;
        
        &:hover {
          background: #45a049;
        }
      }
      
      &[title="–û—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"] {
        background: #f44336;
        color: white;
        
        &:hover {
          background: #da190b;
        }
      }
    }
  }
}

.note-popup {
    padding: 10px;
    max-width: 250px;

    h3 {
        margin: 0 0 10px 0;
        font-size: 16px;
        color: #333;
    }

    p {
        margin: 0 0 10px 0;
        font-size: 14px;
        color: #666;
        line-height: 1.4;
    }

    img {
        display: block;
        width: 100%;
        height: auto;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .note-date {
        margin-top: 10px;
        font-size: 12px;
        color: #999;
        text-align: right;
    }

    .delete-note-btn {
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #ff4444;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        width: 100%;
        font-size: 14px;
        transition: background-color 0.2s;

        &:hover {
            background-color: #cc0000;
        }
    }
}

// –°—Ç–∏–ª–∏ –¥–ª—è –º–∞—Ä–∫–µ—Ä–∞ –∑–∞–º–µ—Ç–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
.leaflet-marker-icon {
    transition: transform 0.2s;

    &:hover {
        transform: scale(1.1);
    }
}

.note-marker {
    background: transparent;
    border: none;

    .marker-inner {
        width: 20px;
        height: 20px;
        background: #2196f3; // –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ü–≤–µ—Ç
        border: 2px solid white;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    &:hover .marker-inner {
        transform: scale(1.1);
        transition: transform 0.2s;
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
.field-actions-dropdown {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;

    .field-actions-btn {
        background: #427EFF;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s ease;

        &:hover {
            background: #2961E5;
        }
    }

    .dropdown-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-top: 5px;
        min-width: 200px;

        button,
        label {
            display: block;
            width: 100%;
            padding: 10px 15px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            color: #354759;
            transition: background 0.2s ease;

            &:hover {
                background: #f5f5f5;
            }
        }

        .upload-btn {
            cursor: pointer;
        }
    }

    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    @media (max-width: 768px) {
        top: 5px;
        right: 5px;

        .field-actions-btn {
            padding: 8px 16px;
            font-size: 14px;
        }

        .dropdown-menu {
            min-width: 180px;

            button,
            label {
                padding: 8px 12px;
                font-size: 14px;
            }
        }
    }
}

.leaflet-container {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
